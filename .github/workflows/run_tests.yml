## Github Actions CI workflow to run automated software tests
name: Run Software Tests

on:
  # Run this workflow when any pull requests are opened or updated
  workflow_dispatch:
  pull_request:
    types: [opened, synchronize, reopened]

permissions:
  pull-requests: write
  contents: read

jobs:
  run_tests:
    name: Run Software Tests
    runs-on: ubuntu-latest

    steps:
      # 1. Checkout repository codebase
      - name: Checkout the code
        uses: actions/checkout@v4

      # 2. Setup Java in the VM (using a valid major version)
      - name: Setup Java
        uses: actions/setup-java@v4
        with:
          distribution: "zulu"
          java-version: '17' # Use a common LTS version like 17, or '21'

      # 3. Setup Flutter in the VM (using the stable channel)
      - name: Setup Flutter
        uses: subosito/flutter-action@v2
        with:
          channel: 'stable' # This automatically uses the latest stable Flutter version

      # 4. Install dependencies
      - name: Install dependencies
        run: flutter pub get

      # 5. Run all app tests
      - name: Run all app tests
        run: flutter test